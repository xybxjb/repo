package cn.deepcoding.controller;import javax.servlet.http.HttpServletRequest;import org.apache.shiro.SecurityUtils;import org.apache.shiro.authc.AuthenticationException;import org.apache.shiro.authc.UsernamePasswordToken;import org.apache.shiro.subject.Subject;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import cn.deepcoding.dao.UsersDao;import cn.deepcoding.model.Users;import io.swagger.annotations.Api;import io.swagger.annotations.ApiImplicitParam;import io.swagger.annotations.ApiImplicitParams;import io.swagger.annotations.ApiOperation;@Controller@RequestMapping("/")@Api(value = "app登陆",description="app登陆模块的接口")public class LoginController {	@Autowired	private UsersDao usersdao;	@RequestMapping(value = { "/login", "/" })	public String toLogin() {		return "login";	}	@RequestMapping("test")	public String test() {		return "test";	}	@RequestMapping(value = "/index")	public String index() {		return "index";	}	@RequestMapping(value = "/refuse")	public String refuse() {		return "refuse";	}	@RequestMapping("/checks")	@ResponseBody	public boolean cha(String username, HttpServletRequest request) {		// 获取主体		Subject subject = SecurityUtils.getSubject();		UsernamePasswordToken token = new UsernamePasswordToken(username, request.getParameter("password"));		try {			// 调用安全认证框架的登录方法			subject.login(token);		} catch (AuthenticationException e) {			System.out.println("登陆失败");			return false;		}		Users user = usersdao.getByName((String) username);		request.getSession().setAttribute("user", user);		// 登录成功后重定向到首页		return true;	}		}